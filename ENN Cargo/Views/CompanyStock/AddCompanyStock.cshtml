@model ENN_Cargo.Models.RegisterForCompanyStock
@{
    ViewData["Title"] = "Add Company Stock";
}

<div class="container">
    <div class="stock-container">
        <div class="page-header">
            <h1 class="page-title">
                <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <line x1="12" y1="5" x2="12" y2="19"></line>
                    <line x1="5" y1="12" x2="19" y2="12"></line>
                </svg>
                Add New Company Stock
            </h1>
            <div class="breadcrumb">
                <a asp-controller="CompanyStock" asp-action="ListOfCompaniesStock">Company Stocks</a>
                <span class="separator">›</span>
                <span class="current">Add Company Stock</span>
            </div>
        </div>

        <div class="card">
            <div class="card-header">
                <h2 class="card-title">Company Stock Details</h2>
                <p class="card-subtitle">Enter all required information to create a new company stock</p>
            </div>
            <div class="card-body">
                <form asp-action="AddCompanyStock" method="post" class="stock-form">
                    <div class="form-section">
                        <h3 class="section-title">General Information</h3>

                        <div class="form-row">
                            <div class="form-group">
                                <label asp-for="Name">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                        <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                                        <circle cx="12" cy="7" r="4"></circle>
                                    </svg>
                                    Company Name
                                </label>
                                <input asp-for="Name" class="form-control" placeholder="Enter company name" />
                                <span asp-validation-for="Name" class="field-validation-error"></span>
                            </div>

                            <div class="form-group">
                                <label asp-for="Email">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                        <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path>
                                        <polyline points="22,6 12,13 2,6"></polyline>
                                    </svg>
                                    Email
                                </label>
                                <input asp-for="Email" type="email" class="form-control" placeholder="company@example.com" />
                                <span asp-validation-for="Email" class="field-validation-error"></span>
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label asp-for="PhoneNumber">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                        <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path>
                                    </svg>
                                    Phone Number
                                </label>
                                <input asp-for="PhoneNumber" class="form-control" placeholder="+1 234 567 8900" />
                                <span asp-validation-for="PhoneNumber" class="field-validation-error"></span>
                            </div>

                            <div class="form-group">
                                <label asp-for="Password">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                        <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
                                        <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
                                    </svg>
                                    Password
                                </label>
                                <input asp-for="Password" type="password" class="form-control" placeholder="Enter password" />
                                <span asp-validation-for="Password" class="field-validation-error"></span>
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label asp-for="ConfirmPassword">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                        <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
                                        <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
                                    </svg>
                                    Confirm Password
                                </label>
                                <input asp-for="ConfirmPassword" type="password" class="form-control" placeholder="Confirm password" />
                                <span asp-validation-for="ConfirmPassword" class="field-validation-error"></span>
                            </div>
                        </div>
                    </div>

                    <div class="form-section">
                        <h3 class="section-title">Location Information</h3>

                        <div class="form-row">
                            <div class="form-group">
                                <label asp-for="Country">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                        <circle cx="12" cy="12" r="10"></circle>
                                        <line x1="2" y1="12" x2="22" y2="12"></line>
                                        <path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"></path>
                                    </svg>
                                    Country
                                </label>
                                <select id="Country" name="Country" class="form-control">
                                    <option value="">Select a country</option>
                                    <option value="USA">United States</option>
                                    <option value="Canada">Canada</option>
                                    <option value="Germany">Germany</option>
                                    <option value="France">France</option>
                                    <option value="UK">United Kingdom</option>
                                    <option value="Bulgaria">Bulgaria</option>
                                </select>
                                <span asp-validation-for="Country" class="field-validation-error"></span>
                            </div>

                            <div class="form-group">
                                <label asp-for="Town">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                        <path d="M12 22s-8-4.5-8-11.8A8 8 0 0 1 12 2a8 8 0 0 1 8 8.2c0 7.3-8 11.8-8 11.8z"></path>
                                        <circle cx="12" cy="10" r="3"></circle>
                                    </svg>
                                    Town/City
                                </label>
                                <select id="Town" name="Town" class="form-control">
                                    <option value="">Select a town</option>
                                </select>
                                <span asp-validation-for="Town" class="field-validation-error"></span>
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label for="CustomTown">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                        <path d="M12 20h9"></path>
                                        <path d="M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"></path>
                                    </svg>
                                    Or enter a custom town
                                </label>
                                <input type="text" id="CustomTown" name="CustomTown" class="form-control" placeholder="Enter town if not in the list" />
                            </div>

                            <div class="form-group full-width">
                                <label asp-for="Address">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                        <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path>
                                        <circle cx="12" cy="10" r="3"></circle>
                                    </svg>
                                    Complete Address
                                </label>
                                <input asp-for="Address" class="form-control" placeholder="Street address, building number, etc." />
                                <span asp-validation-for="Address" class="field-validation-error"></span>
                            </div>
                        </div>
                    </div>

                    <div class="form-actions">
                        <button type="submit" class="btn btn-primary">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <line x1="12" y1="5" x2="12" y2="19"></line>
                                <line x1="5" y1="12" x2="19" y2="12"></line>
                            </svg>
                            Create Company Stock
                        </button>

                        <a asp-controller="CompanyStock" asp-action="ListOfCompaniesStock" class="btn btn-secondary">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M19 12H5"></path>
                                <polyline points="12 19 5 12 12 5"></polyline>
                            </svg>
                            Back to List
                        </a>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    @await Html.PartialAsync("_ValidationScriptsPartial")
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            // Predefined towns
            const predefinedTowns = {
                "USA": ["New York", "Los Angeles", "Chicago", "Houston", "Phoenix"],
                "Canada": ["Toronto", "Vancouver", "Montreal", "Calgary", "Ottawa"],
                "Germany": ["Berlin", "Munich", "Hamburg", "Cologne", "Frankfurt"],
                "France": ["Paris", "Lyon", "Marseille", "Toulouse", "Nice"],
                "UK": ["London", "Manchester", "Birmingham", "Glasgow", "Liverpool"],
                "Bulgaria": ["Sofia", "Plovdiv", "Varna", "Burgas", "Ruse"]
            };

            // Country and town selection
            function updateTowns() {
                const selectedCountry = document.getElementById('Country').value;
                const townSelect = document.getElementById('Town');

                townSelect.innerHTML = '<option value="">Select a town</option>';

                if (selectedCountry && predefinedTowns[selectedCountry]) {
                    predefinedTowns[selectedCountry].forEach(function(town) {
                        const option = document.createElement('option');
                        option.value = town;
                        option.text = town;
                        townSelect.appendChild(option);
                    });
                }
            }

            // Initialize towns when page loads
            updateTowns();

            // Update towns when country changes
            document.getElementById('Country').addEventListener('change', updateTowns);

            // Handle custom town vs selected town
            const customTownInput = document.getElementById('CustomTown');
            const townSelect = document.getElementById('Town');

            customTownInput.addEventListener('input', function() {
                if (this.value.trim() !== '') {
                    townSelect.value = '';
                }
            });

            townSelect.addEventListener('change', function() {
                if (this.value !== '') {
                    customTownInput.value = '';
                }
            });
        });
    </script>
}